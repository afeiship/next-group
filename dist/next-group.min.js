!function(){var t=t||this||window||Function("return this")(),i=t.nx||require("next-js-core2"),n=i.declare("nx.Group",{properties:{items:{get:function(){var t=[];return this._groups.forEach(function(i){t=t.concat(i.items||[])}),t}},groups:{get:function(){return this._groups}},maps:{get:function(){var t={},n={},s=this;return i.each(this._groups,function(e,r){n[r.id]=r,i.each(r.items,function(i,n){t[s.tid(n)]=n})}),{item:t,group:n}}}},methods:{init:function(t,i){this.groupId=t,this.itemId=i,this._groups=[]},id:function(t,i){return"function"==typeof this[t]?this[t](i):i[this[t]]},gid:function(t){return this.id("groupId",t)},tid:function(t){return this.id("itemId",t)},indexOfGroup:function(t){for(var i=this.gid(t),n=0;n<this._groups.length;n++){if(this._groups[n].id===i)return n}return-1},indexOf:function(t,i,n){for(var s=-1,e=0;e<i.length;e++){var r=i[e];if(this[t](n)===this[t](r)){s=e;break}}return s},contains:function(t){return this.indexOf("tid",this.items,t)>-1},get:function(t){return this.maps.group[t]},set:function(t,i){this.maps.group[t]=i},update:function(t,n){i.each(n,function(i,n){this.get(t)[i]=n},this)},add:function(t){if(!this.contains(t)){var i=this.gid(t),n=this.indexOfGroup(t);-1!==n?this._groups[n].items.push(t):this._groups.push({id:i,items:[t]})}},remove:function(t){var i=this.indexOfGroup(t);if(-1!==i){var n=this._groups[i],s=this.indexOf("tid",n.items,t);if(-1!==s)return n.items.splice(s,1),n.items.length||this._groups.splice(i,1),!0}return!1},toggleBy:function(t,i){i?this.add(t):this.remove(t)},toggle:function(t){this.toggleBy(t,!this.contains(t))},serialize:function(){return this._groups}}});"undefined"!=typeof module&&module.exports&&(module.exports=n)}();